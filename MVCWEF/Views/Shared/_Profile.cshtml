
@model MVCWEF.Models.User
@{
    Layout = null;
}


@{
    MVCWEF.Models.User user = new MVCWEF.Models.User();
    user = (MVCWEF.Models.User)@Session["User"];



    string urlName = Request.UrlReferrer.ToString();

}


        <!DOCTYPE html>
        <html lang="en-US">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>Profile</title>
            <meta name="description" content="Creative CV is a HTML resume template for professionals. Built with Bootstrap 4, Now UI Kit and FontAwesome, this modern and responsive design template is perfect to showcase your portfolio, skils and experience." />
            <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet">
            <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
            <link href="~/profile/css11/aos.css" rel="stylesheet" />
            <link href="~/profile/css11/bootstrap.min.css" rel="stylesheet" />
            <link href="~/profile/styles11/main.css" rel="stylesheet" />
            <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
            <script src="~/Scripts/Scripts.js"></script>
        </head>
        <body id="top" onload="fun()">
            <header>
                <div class="profile-page sidebar-collapse">
                    <nav class="navbar navbar-expand-lg fixed-top navbar-transparent bg-primary" color-on-scroll="400">
                        <div class="container">
                            <div class="navbar-translate">
                                <a class="navbar-brand" href="#" rel="tooltip"></a>
                                <button class="navbar-toggler navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-bar bar1"></span><span class="navbar-toggler-bar bar2"></span><span class="navbar-toggler-bar bar3"></span></button>
                            </div>
                            <div class="collapse navbar-collapse justify-content-end" id="navigation">

                            </div>
                        </div>
                    </nav>
                </div>
            </header>
            <div class="page-content">
                <div>
                    <div class="profile-page">
                        <div class="wrapper">
                            <div class="page-header page-header-small" filter-color="green">
                                <div class="page-header-image" data-parallax="true" style="background-image: url('../../profile/images11/cc-bg-1.jpg');;"></div>
                                <div class="container">
                                    <div class="content-center">
                                        <div class="cc-profile-image">
                                            <a href="#">
                                                    <img src="@Url.Content(@user.Image)" /><br />
                                                   
                                            </a>
                                        </div>
                                        <div class="h2 title">@user.Fname  @user.Lname</div>

                                    </div>
                                </div>
                                <div class="section">
                                    <div class="container">
                                        <div class="button-container">
                                            <a class="btn btn-default btn-round btn-lg btn-icon" href="#" rel="tooltip" title="Follow me on Facebook"><i class="fa fa-facebook"></i></a>

                                            <a class="btn btn-default btn-round btn-lg btn-icon" href="#" rel="tooltip" title="Follow me on Twitter"><i class="fa fa-twitter"></i></a>


                                            <a class="btn btn-default btn-round btn-lg btn-icon" href="#" rel="tooltip" title="Follow me on Instagram">
                                                <i class="fa fa-instagram"></i>
                                            </a>
                                            @{ 
                                                if (urlName != null) {
                                            <a class="btn btn-default btn-round btn-lg btn-icon" href="@urlName" rel="tooltip" title="Go To Home Page"><i class="fa fa-home"></i></a>
                                                    }
                                                }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="section" id="about">
                        <div class="container">
                            <div class="card" data-aos="fade-up" data-aos-offset="10">
                                <div class="row">
                                    <div class="col-lg-6 col-md-12">

                                        <div class="card-body">

                                            <div class="h4 mt-0 title">Basic Information</div>
                                            <table class="table">
                                                <thead>
                                                    <tr class="success">

                                                        <th>
                                                            <ul class="nav nav-tabs">
                                                                <li class="active"><a data-toggle="tab" href="#" onclick="convertdata()">Update Data</a></li>
                                                            </ul>
                                                        </th>
                                                        <th>
                                                            <ul class="nav nav-tabs">
                                                                <li><a data-toggle="tab" href="#" onclick="convertpass()">Update Password</a></li>
                                                            </ul>
                                                        </th>
                                                        <th>
                                                            <ul class="nav nav-tabs">
                                                                <li><a data-toggle="tab" href="#" onclick="convertpicture()">Update Picture</a></li>
                                                            </ul>
                                                        </th>
                                                    </tr>
                                                <thead>
                                            </table>


                                            <form id="myData">

                                                @Html.HiddenFor(m => m.UserID);
                                                @Html.AntiForgeryToken()
                                                <hr />
                                                @Html.ValidationSummary(true)

                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Fname, new { @class = "col-md-2 control-label", id = "Fname" })
                                                    <div class="col-md-10">
                                                        @Html.TextBoxFor(m => m.Fname, new { @class = "", id = "fname", @Value = user.Fname, @disabled = "disabled" })
                                                        @Html.ValidationMessageFor(m => m.Fname)
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Lname, new { @class = "col-md-2 control-label", id = "Lname" })
                                                    <div class="col-md-10">
                                                        @Html.TextBoxFor(m => m.Lname, new { @class = "", id = "lname", @Value = user.Lname, @disabled = "disabled" })
                                                        @Html.ValidationMessageFor(m => m.Lname)
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Email, new { @class = "col-md-2 control-label", id = "Email" })
                                                    <div class="col-md-10">
                                                        @Html.TextBoxFor(m => m.Email, new { @class = "", id = "email", @Value = user.Email, @disabled = "disabled" })
                                                        @Html.ValidationMessageFor(m => m.Email)
                                                    </div>
                                                </div>




                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Phone, new { @class = "col-md-2 control-label", id = "Phone" })
                                                    <div class="col-md-10">
                                                        @Html.TextBoxFor(m => m.Phone, new { @class = "", id = "phone", @Value = user.Phone, @disabled = "disabled" })
                                                        @Html.ValidationMessageFor(m => m.Phone)
                                                    </div>
                                                </div>



                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Address, new { @class = "col-md-2 control-label", id = "Address" })
                                                    <div class="col-md-10">
                                                        @Html.TextBoxFor(m => m.Address, new { @class = "", id = "address", @Value = user.Address, @disabled = "disabled" })
                                                        @Html.ValidationMessageFor(m => m.Address)
                                                    </div>
                                                </div>

                                                <button onclick="change()" type="button" name="submit" class="btn btn-default">Edit Profile</button>



                                                <div class="form-group">
                                                    <div class="col-md-offset-2 col-md-10">
                                                        <input type="button" value="Update Profile" class="btn btn-default" id="Save" />
                                                    </div>
                                                </div>

                                            </form>
                                            <link href="~/Scripts/jquery-ui.min.css" rel="stylesheet" />
                                            <script src="~/profile/js11/core/jquery.3.2.1.min.js"></script>
                                            <script>

                                                $(document).ready(function () {

                                                    $("#Save").click(function () {



                                                        myData = $("#myData").serialize();

                                                        $.ajax({
                                                            type: "POST",
                                                            url: "/RoleManager/UpdateProfile",
                                                            data: myData,
                                                            success: function (response) {
                                                                alert(" Data Updated");

                                                            }

                                                        })

                                                    })


                                                    $("#buttonsave").click(function () {



                                                        myData = $("#mypassdata").serialize();

                                                        $.ajax({
                                                            type: "POST",
                                                            url: "/RoleManager/UpdatePassword?CurrentPasswordUser=" + document.getElementById("CurrentPasswordUser").value + "&NewPasswordUser=" + document.getElementById("NewPasswordUser").value,
                                                            success: function (response) {
                                                                alert(response);

                                                            }

                                                        })

                                                    })


                                                    $("#buttonsavepicture").click(function () {



                                                        myData = $("#mypicture").serialize();

                                                        $.ajax({
                                                            type: "POST",
                                                            url: "/RoleManager/UpdateProfileImage?Picture=" + document.getElementById("Picture").value,
                                                            
                                                            success: function (response) {
                                                                alert(response);

                                                            }

                                                        })

                                                    })




                                                })


                                            </script>

                                            <div class="col-lg-6 col-md-12">
                                                <div class="card-body">
                                                    <div class="h4 mt-0 title"></div>



                                                    <form id="mypassdata" hidden="hidden">
                                                        <div class="row" id="test">





                                                            <div class="form-group">


                                                                <div class="col-sm-6">
                                                                    @Html.LabelFor(m => m.CurrentPassword, new { @class = " control-label" }):
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <input type="password" id="CurrentPasswordUser" />
                                                                    @Html.ValidationMessageFor(m => m.Password)
                                                                </div>

                                                            </div>


                                                            <div class="form-group">


                                                                <div class="col-sm-6">
                                                                    @Html.LabelFor(m => m.Password, new { @class = " control-label" })
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <input type="password" id="NewPasswordUser" />
                                                                    @Html.ValidationMessageFor(m => m.Password)
                                                                </div>

                                                            </div>

                                                        </div>
                                                        <div class="form-group">
                                                            <div class="col-md-offset-2 col-md-10">
                                                                <input type="button" value="Change" class="btn btn-default" id="buttonsave" />
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>






                                            <div class="col-lg-6 col-md-12">
                                                <div class="card-body">
                                                    <div class="h4 mt-0 title"></div>



                                                    <form id="mypicture" hidden="hidden">
                                                        <div class="row" id="test">

                                                            <div class="form-group">

                                                               <div class="col-sm-6">
                                                                    @Html.LabelFor(m => m.Image, new { @class = " control-label" })
                                                                </div>
                                                               <div class="col-sm-6">
                                                                   <img src="" style="margin:10px" height="200" width="200" id="imagePreview" />
                                                                   <input id="Picture" type="file" style="width:200px;border:5px" name="ImageUpload" accept="image/jpeg , image/png " onchange="ShowImagePreview(this, document.getElementById('imagePreview'))" />

                                                                   @Html.ValidationMessageFor(m => m.Image)
                                                               </div>

                                                            </div>

                                                        </div>
                                                        <div class="form-group">
                                                            <div class="col-md-offset-2 col-md-10">
                                                                <input type="button" value="Change" class="btn btn-default" id="buttonsavepicture" />
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>






                                        </div>
                                    </div>

                                </div>
                            </div>


                           



                           


                            <script type="text/javascript">
                                

                                function convertdata() {
                                    document.getElementById("mypassdata").hidden = true;
                                    document.getElementById("myData").hidden = false;
                                    document.getElementById("mypicture").hidden = true;
                                }

                                function convertpass() {
                                    document.getElementById("mypassdata").hidden = false;
                                    document.getElementById("myData").hidden = true;
                                    document.getElementById("mypicture").hidden = true;
                                } 
                                function convertpicture() {
                                    document.getElementById("mypassdata").hidden = true;
                                    document.getElementById("myData").hidden = true;
                                    document.getElementById("mypicture").hidden = false;
                                }
                        $(document).ready(function () {
                            //called when key is pressed in textbox
                            $("#CurrentPassword").keypress(function (e) {
                                var x = document.getElementById("CurrentPassword").value;
                                console.log(x);
                                if (x == @user.Password) {
                                    //we will display error message
                                    document.getElementById("newpassid").hidden = false;
                                    document.getElementById("confpassid").hidden = false;
                                    document.getElementById("CurrentPassword").disabled = true;



                                    return false;
                                } else {
                                    document.getElementById("newpassid").hidden = true;
                                    document.getElementById("confpassid").hidden = true;
                                }


                            });
                            $("#confpassid").keypress(function (e) {
                                var y = document.getElementById("newpassid").value;
                                var z = document.getElementById("confpassid").value;
                            if (y == z) {
                                document.getElementById("buttonsave").hidden = false;
                                }
                            });
                        });

                            </script>
                            <script>
                                function fun() {
                                    document.getElementById("CurrentPassword").hidden = true;
                                    document.getElementById("NewPassword").hidden = true;
                                    document.getElementById("ConfirmePassword").hidden = true;
                                    document.getElementById("CurrentPassword1").hidden = true;
                                    document.getElementById("NewPassword1").hidden = true;
                                    document.getElementById("ConfirmePassword1").hidden = true;
                                    document.getElementById("idbutton").hidden = true;
                                }

                                function changePassword() {
                                    document.getElementById("CurrentPassword").hidden = false;
                                    document.getElementById("NewPassword").hidden = false;
                                    document.getElementById("ConfirmePassword").hidden = false;
                                    document.getElementById("CurrentPassword1").hidden = false;
                                    document.getElementById("NewPassword1").hidden = false;
                                    document.getElementById("ConfirmePassword1").hidden = false;
                                    document.getElementById("idbutton").hidden = false;


                                }

                                function change() {
                                    document.getElementById("fname").disabled = false;
                                    document.getElementById("lname").disabled = false;
                                    document.getElementById("email").disabled = false;
                                    document.getElementById("address").disabled = false;
                                    document.getElementById("phone").disabled = false;

                                }

                                function change2() {
                                    document.getElementById("fname").disabled = true;
                                    document.getElementById("lname").disabled = true;
                                    document.getElementById("email").disabled = true;
                                    document.getElementById("address").disabled = true;
                                    document.getElementById("phone").disabled = true;

                                }</script>
                            <div class="section" id="contact">
                                <div class="cc-contact-information" style="background-image: url('../../profile/images11/staticmap.png');;">
                                    <div class="container">
                                        <div class="cc-contact">
                                            <div class="row">
                                                <div class="col-md-9">
                                                    <div class="card mb-0" data-aos="zoom-in">
                                                        <div class="h4 text-center title">Contact Me</div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="card-body">
                                                                    <form action="https://formspree.io/your@email.com" method="POST">
                                                                        <div class="p pb-3"><strong>Feel free to contact me </strong></div>
                                                                        <div class="row mb-3">
                                                                            <div class="col">
                                                                                <div class="input-group">
                                                                                    <span class="input-group-addon"><i class="fa fa-user-circle"></i></span>
                                                                                    <input class="form-control" type="text" name="name" placeholder="Name" required="required" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row mb-3">
                                                                            <div class="col">
                                                                                <div class="input-group">
                                                                                    <span class="input-group-addon"><i class="fa fa-file-text"></i></span>
                                                                                    <input class="form-control" type="text" name="Subject" placeholder="Subject" required="required" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row mb-3">
                                                                            <div class="col">
                                                                                <div class="input-group">
                                                                                    <span class="input-group-addon"><i class="fa fa-envelope"></i></span>
                                                                                    <input class="form-control" type="email" name="_replyto" placeholder="E-mail" required="required" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row mb-3">
                                                                            <div class="col">
                                                                                <div class="form-group">
                                                                                    <textarea class="form-control" name="message" placeholder="Your Message" required="required"></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col">
                                                                                <button class="btn btn-primary" type="submit">Send</button>
                                                                            </div>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="card-body">
                                                                    <p class="mb-0"><strong>Address </strong></p>
                                                                    <p class="pb-2">140, City Center, New York, U.S.A</p>
                                                                    <p class="mb-0"><strong>Phone</strong></p>
                                                                    <p class="pb-2">+1718-111-0011</p>
                                                                    <p class="mb-0"><strong>Email</strong></p>
                                                                    <p>anthony@company.com</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                        <footer class="footer">

                            <div class="text-center text-muted">
                            </div>
                        </footer>
                        <script src="~/profile/js11/core/bootstrap.min.js"></script>
                        
                        <script src="~/profile/js11/core/popper.min.js"></script>
                        <script src="~/profile/js11/now-ui-kit.js"></script>
                        <script src="~/profile/js11/aos.js"></script>
                        <script src="~/profile/scripts11/main.js"></script>

                        @section scripts{
                            @Scripts.Render("~/bundles/jqueryval")

                            <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>


                            <script>
                                function activatejQueryTable() {
                                    $("#employeeTable").DataTable();
                                }

                                $(function () {
                                    activatejQueryTable();
                                });

                            </script>
                        }

                        @RenderBody()
</body>
    </html>


